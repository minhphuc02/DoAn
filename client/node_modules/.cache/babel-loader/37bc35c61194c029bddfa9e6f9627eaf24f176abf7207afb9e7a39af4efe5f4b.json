{"ast":null,"code":"var _jsxFileName = \"D:\\\\JS\\\\ecommecre_final\\\\client\\\\src\\\\components\\\\mainpages\\\\products\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GlobalState } from \"../../../GlobalState\";\nimport ProductItem from '../untils/Product_item/ProductItem';\nimport \"./Product.css\";\nimport axios from \"axios\";\n// import Filters from \"../utils/Product_item/Filters\"\n// import LoadMore from '../utils/Product_item/LoadMore';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Products() {\n  _s();\n  const state = useContext(GlobalState);\n  const [products, setProducts] = state.productsAPI.products;\n  const [isAdmin] = state.userAPI.isAdmin;\n  const addCart = state.userAPI.addCart;\n  const [callback, setCallback] = state.productsAPI.callback;\n  const [isChecked, setIsChecked] = useState(false);\n  const [token] = state.token;\n  const deleteProduct = async (id, public_id) => {\n    console.log(id);\n    try {\n      const destroyImg = axios.post(`/api/destroy`, {\n        public_id: public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      const deleteProdukt = axios.delete(`/api/products/${id}`, {\n        headers: {\n          Authorization: token\n        }\n      });\n      await destroyImg;\n      await deleteProdukt;\n      setCallback(!callback);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n  const checkAll = () => {\n    products.forEach(product => {\n      product.checked = !isChecked;\n    });\n    setProducts([...products]);\n    setIsChecked(!isChecked);\n  };\n  const deleteAll = () => {\n    products.forEach(product => {\n      if (product.checked) deleteProduct(product._id, product.images.public_id);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Filters, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delete-all\",\n      style: {\n        textAlign: \"right\",\n        margin: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          textTransform: 'uppercase',\n          color: 'blue',\n          letterSpacing: '1.3px'\n        },\n        children: \"Select all\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          height: '25px',\n          width: '25px',\n          transform: 'translateX(5px)',\n          margin: '0 15px'\n        },\n        type: \"checkbox\",\n        checked: isChecked,\n        onChange: checkAll\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteAll,\n        style: {\n          border: '1px solid crimson',\n          padding: '10px 25px',\n          color: 'crimson',\n          textTransform: 'uppercase'\n        },\n        children: \" Delete All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products\",\n      children: products.map(product => {\n        return /*#__PURE__*/_jsxDEV(ProductItem, {\n          product: product,\n          setProducts: setProducts,\n          isAdmin: isAdmin,\n          callback: callback,\n          setCallback: setCallback,\n          deleteProduct: deleteProduct,\n          products: products\n        }, product._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(LoadMore, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), products.length === 0]\n  }, void 0, true);\n}\n_s(Products, \"GC20/G/0NITnqb9a4ujTTaZWtLo=\");\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useContext","useEffect","useState","GlobalState","ProductItem","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Products","_s","state","products","setProducts","productsAPI","isAdmin","userAPI","addCart","callback","setCallback","isChecked","setIsChecked","token","deleteProduct","id","public_id","console","log","destroyImg","post","headers","Authorization","deleteProdukt","delete","err","alert","response","data","msg","checkAll","forEach","product","checked","deleteAll","_id","images","children","Filters","fileName","_jsxFileName","lineNumber","columnNumber","className","style","textAlign","margin","textTransform","color","letterSpacing","height","width","transform","type","onChange","onClick","border","padding","map","LoadMore","length","_c","$RefreshReg$"],"sources":["D:/JS/ecommecre_final/client/src/components/mainpages/products/Products.js"],"sourcesContent":["import React, { useContext,useEffect , useState } from 'react'\r\nimport { GlobalState } from \"../../../GlobalState\";\r\nimport ProductItem from '../untils/Product_item/ProductItem'\r\nimport \"./Product.css\"\r\nimport axios from \"axios\"\r\n// import Filters from \"../utils/Product_item/Filters\"\r\n// import LoadMore from '../utils/Product_item/LoadMore';\r\n\r\nfunction Products() {\r\n    const state = useContext(GlobalState)\r\n    const [products,setProducts] = state.productsAPI.products\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const addCart = state.userAPI.addCart\r\n   const [callback, setCallback] = state.productsAPI.callback\r\n   const [isChecked, setIsChecked] = useState(false)\r\n   const [token]=state.token;\r\n   \r\n   \r\n   const deleteProduct = async  (id, public_id) => {\r\n    console.log(id)\r\n    \r\n    try {\r\n        const destroyImg = axios.post(`/api/destroy`, {public_id: public_id},{\r\n            headers: {Authorization: token}\r\n        })\r\n        const deleteProdukt = axios.delete(`/api/products/${id}`,{\r\n            headers: {Authorization: token}\r\n        })\r\n        await destroyImg\r\n        await deleteProdukt\r\n        setCallback(!callback)\r\n    } catch (err) {\r\n        alert(err.response.data.msg)\r\n    }\r\n}\r\n\r\n   const checkAll= () =>{\r\n       products.forEach(product =>{\r\n           product.checked =  !isChecked\r\n       })\r\n       setProducts([...products])\r\n       setIsChecked(!isChecked)\r\n   }\r\n\r\n   const deleteAll = () =>{\r\n       products.forEach(product => {\r\n           if(product.checked) deleteProduct(product._id, product.images.public_id)\r\n       })\r\n   }\r\n    return (\r\n        <>\r\n        <Filters />\r\n        {\r\n            isAdmin && \r\n            <div className=\"delete-all\"style={{textAlign:\"right\", margin:'20px'}} >\r\n                <span style={{textTransform:'uppercase', color:'blue', letterSpacing:'1.3px'}}>Select all</span>\r\n                <input style={{height:'25px', width:'25px', transform:'translateX(5px)',margin:'0 15px'}} type=\"checkbox\" checked={isChecked} onChange={checkAll}/>\r\n                <button onClick={deleteAll} style={{border:'1px solid crimson', padding:'10px 25px', color:'crimson', textTransform:'uppercase'}}> Delete All</button>\r\n            </div>\r\n        }\r\n        <div className=\"products\">\r\n         {\r\n             products.map(product => {\r\n                 return <ProductItem key={product._id} product={product} setProducts={setProducts}\r\n                 isAdmin={isAdmin} callback={callback} setCallback={setCallback} deleteProduct={deleteProduct}  products={products}/>\r\n             })\r\n         }\r\n        </div>\r\n        <LoadMore/>\r\n        {\r\n            products.length === 0 \r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Products\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}