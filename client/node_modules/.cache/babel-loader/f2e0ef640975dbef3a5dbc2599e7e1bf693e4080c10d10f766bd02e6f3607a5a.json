{"ast":null,"code":"var _jsxFileName = \"D:\\\\JS\\\\ecommecre_final\\\\client\\\\src\\\\components\\\\mainpages\\\\products\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GlobalState } from \"../../../GlobalState\";\nimport ProductItem from '../utils/Product_item/ProductItem';\nimport \"./Product.css\";\nimport axios from \"axios\";\nimport Filters from \"../utils/Product_item/Filters\";\nimport LoadMore from '../utils/Product_item/LoadMore';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Products() {\n  _s();\n  const state = useContext(GlobalState);\n  const [products, setProducts] = state.productsAPI.products;\n  const [isAdmin] = state.userAPI.isAdmin;\n  const addCart = state.userAPI.addCart;\n  const [callback, setCallback] = state.productsAPI.callback;\n  const [isChecked, setIsChecked] = useState(false);\n  const [token] = state.token;\n  const [loading, setLoading] = useState(false);\n  const deleteProduct = async (id, public_id) => {\n    console.log(id);\n    try {\n      setLoading(true);\n      const destroyImg = axios.post(`/api/destroy`, {\n        public_id: public_id\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      const deleteProdukt = axios.delete(`/api/products/${id}`, {\n        headers: {\n          Authorization: token\n        }\n      });\n      await destroyImg;\n      await deleteProdukt;\n      setLoading(false);\n      setCallback(!callback);\n    } catch (err) {\n      alert(err.response.data.msg);\n    }\n  };\n  const checkAll = () => {\n    products.forEach(product => {\n      product.checked = !isChecked;\n    });\n    setProducts([...products]);\n    setIsChecked(!isChecked);\n  };\n  const deleteAll = () => {\n    products.forEach(product => {\n      if (product.checked) deleteProduct(product._id, product.images.public_id);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Filters, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"delete-all\",\n      style: {\n        textAlign: \"right\",\n        margin: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          textTransform: 'uppercase',\n          color: 'blue',\n          letterSpacing: '1.3px'\n        },\n        children: \"Select all\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: {\n          height: '25px',\n          width: '25px',\n          transform: 'translateX(5px)',\n          margin: '0 15px'\n        },\n        type: \"checkbox\",\n        checked: isChecked,\n        onChange: checkAll\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteAll,\n        style: {\n          border: '1px solid crimson',\n          padding: '10px 25px',\n          color: 'crimson',\n          textTransform: 'uppercase'\n        },\n        children: \" Delete All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products\",\n      children: products.map(product => {\n        return /*#__PURE__*/_jsxDEV(ProductItem, {\n          product: product,\n          setProducts: setProducts,\n          isAdmin: isAdmin,\n          callback: callback,\n          setCallback: setCallback,\n          deleteProduct: deleteProduct,\n          products: products\n        }, product._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(LoadMore, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), products.length === 0 && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 38\n    }, this)]\n  }, void 0, true);\n}\n_s(Products, \"dufUUBohcVp8hzvWGffT6RYYsos=\");\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useContext","useEffect","useState","GlobalState","ProductItem","axios","Filters","LoadMore","jsxDEV","_jsxDEV","Fragment","_Fragment","Products","_s","state","products","setProducts","productsAPI","isAdmin","userAPI","addCart","callback","setCallback","isChecked","setIsChecked","token","loading","setLoading","deleteProduct","id","public_id","console","log","destroyImg","post","headers","Authorization","deleteProdukt","delete","err","alert","response","data","msg","checkAll","forEach","product","checked","deleteAll","_id","images","children","fileName","_jsxFileName","lineNumber","columnNumber","className","style","textAlign","margin","textTransform","color","letterSpacing","height","width","transform","type","onChange","onClick","border","padding","map","length","Loading","_c","$RefreshReg$"],"sources":["D:/JS/ecommecre_final/client/src/components/mainpages/products/Products.js"],"sourcesContent":["import React, { useContext,useEffect , useState } from 'react'\r\nimport { GlobalState } from \"../../../GlobalState\";\r\nimport ProductItem from '../utils/Product_item/ProductItem';\r\nimport \"./Product.css\"\r\nimport axios from \"axios\"\r\nimport Filters from \"../utils/Product_item/Filters\"\r\nimport LoadMore from '../utils/Product_item/LoadMore';\r\n\r\nfunction Products() {\r\n    const state = useContext(GlobalState)\r\n    const [products,setProducts] = state.productsAPI.products\r\n    const [isAdmin] = state.userAPI.isAdmin\r\n    const addCart = state.userAPI.addCart\r\n   const [callback, setCallback] = state.productsAPI.callback\r\n   const [isChecked, setIsChecked] = useState(false)\r\n   const [token]=state.token;\r\n   const [loading, setLoading]= useState(false)\r\n   \r\n   \r\n   const deleteProduct = async  (id, public_id) => {\r\n    console.log(id)\r\n    \r\n    try {\r\n        setLoading(true)\r\n        const destroyImg = axios.post(`/api/destroy`, {public_id: public_id},{\r\n            headers: {Authorization: token}\r\n        })\r\n        const deleteProdukt = axios.delete(`/api/products/${id}`,{\r\n            headers: {Authorization: token}\r\n        })\r\n        await destroyImg\r\n        await deleteProdukt\r\n        setLoading(false)\r\n        setCallback(!callback)\r\n    } catch (err) {\r\n        alert(err.response.data.msg)\r\n    }\r\n}\r\n\r\n   const checkAll= () =>{\r\n       products.forEach(product =>{\r\n           product.checked =  !isChecked\r\n       })\r\n       setProducts([...products])\r\n       setIsChecked(!isChecked)\r\n   }\r\n\r\n   const deleteAll = () =>{\r\n       products.forEach(product => {\r\n           if(product.checked) deleteProduct(product._id, product.images.public_id)\r\n       })\r\n   }\r\n    return (\r\n        <>\r\n        <Filters />\r\n        {\r\n            isAdmin && \r\n            <div className=\"delete-all\"style={{textAlign:\"right\", margin:'20px'}} >\r\n                <span style={{textTransform:'uppercase', color:'blue', letterSpacing:'1.3px'}}>Select all</span>\r\n                <input style={{height:'25px', width:'25px', transform:'translateX(5px)',margin:'0 15px'}} type=\"checkbox\" checked={isChecked} onChange={checkAll}/>\r\n                <button onClick={deleteAll} style={{border:'1px solid crimson', padding:'10px 25px', color:'crimson', textTransform:'uppercase'}}> Delete All</button>\r\n            </div>\r\n        }\r\n        <div className=\"products\">\r\n         {\r\n             products.map(product => {\r\n                 return <ProductItem key={product._id} product={product} setProducts={setProducts}\r\n                 isAdmin={isAdmin} callback={callback} setCallback={setCallback} deleteProduct={deleteProduct}  products={products}/>\r\n             })\r\n         }\r\n        </div>\r\n        <LoadMore/>\r\n        {\r\n            products.length === 0 && <Loading/>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Products\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}